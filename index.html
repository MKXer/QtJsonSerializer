<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QtJsonSerializer: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" style="display: inline;">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QtJsonSerializer
   &#160;<span id="projectnumber">4.0.0</span>
   </div>
   <div id="projectbrief">A library to perform generic seralization and deserialization of QObjects</div>
  </td>
 </tr>
 </tbody>
</table>
<a style="float: right;" target="_blank"  href="https://github.com/Skycoder42/QJsonSerializer">
<img style="padding: 10px;" src="GitHub_Logo.png"/>
</a>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">QtJsonSerializer Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#qtjsonserializer_readme_label_0">Features</a></li>
<li class="level1"><a href="#qtjsonserializer_readme_label_1">Download/Installation</a><ul><li class="level2"><a href="#qtjsonserializer_readme_label_2">Building without converter registration</a></li>
</ul>
</li>
<li class="level1"><a href="#qtjsonserializer_readme_label_3">Usage</a><ul><li class="level2"><a href="#qtjsonserializer_readme_label_4">Example</a></li>
<li class="level2"><a href="#qtjsonserializer_readme_label_5">Important Usage Hints</a></li>
<li class="level2"><a href="#qtjsonserializer_readme_label_6">Support for alternative Containers</a></li>
</ul>
</li>
<li class="level1"><a href="#qtjsonserializer_readme_label_7">Documentation</a></li>
<li class="level1"><a href="#qtjsonserializer_readme_label_8">Porting</a><ul><li class="level2"><a href="#qtjsonserializer_readme_label_9">Rename refactoring</a></li>
<li class="level2"><a href="#qtjsonserializer_readme_label_10">Changes in type registrations</a><ul><li class="level3"><a href="#qtjsonserializer_readme_label_11">Support for more containers</a></li>
</ul>
</li>
<li class="level2"><a href="#qtjsonserializer_readme_label_12">CBOR support</a></li>
<li class="level2"><a href="#qtjsonserializer_readme_label_13">Changes for TypeConverters</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>A library to perform generic seralization and deserialization of QObjects from and to JSON and CBOR.</p>
<p>With this small library, you are able to serialize any C++ datatype to JSON or CBOR and back. This is done with help of <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a>'s meta system.</p>
<p><a href="https://github.com/Skycoder42/QtJsonSerializer/actions?query=workflow%3A%22Build%2C+test+and+upload+the+module%22"><img src="https://github.com/Skycoder42/QtJsonSerializer/workflows/Build,%20test%20and%20upload%20the%20module/badge.svg" alt="Github Actions status" class="inline"/></a> <a href="https://www.codacy.com/app/Skycoder42/QtJsonSerializer"><img src="https://api.codacy.com/project/badge/Grade/3f69dd82640e4e3b8526f1a54bec2264" alt="Codacy Badge" class="inline"/></a> <a href="https://aur.archlinux.org/packages/qt5-jsonserializer/"><img src="https://img.shields.io/aur/version/qt5-jsonserializer.svg" alt="AUR" class="inline"/></a></p>
<blockquote class="doxtable">
<p>The library was recently update to 4.0.0. Have a look at the <a href="#porting">Porting section</a> to learn how to migrate your project from 3.* to 4.0.0. Don't be afraid, as for most existing projects, only class names will have changed. </p>
</blockquote>
<h1><a class="anchor" id="qtjsonserializer_readme_label_0"></a>
Features</h1>
<ul>
<li>Serialize QObjects, Q_GADGETS, lists, maps, etc. to JSON/CBOR, in a generic matter</li>
<li>... and of course deserialize JSON/CBOR back as well</li>
<li>De/serialize any <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qvariant.html">QVariant</a> - as long as it contains only basic types or one of the above<ul>
<li>Works even with QJsonValue/Array/Object as properties</li>
</ul>
</li>
<li>Serializes Q_PROPERTY elements</li>
<li>Enum de/serialization as integer or as string</li>
<li>Deserialization: Additional JSON/CBOR-values will be stored as dynamic properties for QObjects</li>
<li>Supports polymorphism</li>
<li>Fully Unit-Tested</li>
<li>Thread-Safe</li>
<li>Easily extensible</li>
</ul>
<h1><a class="anchor" id="qtjsonserializer_readme_label_1"></a>
Download/Installation</h1>
<p>There are multiple ways to install the <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a> module, sorted by preference:</p>
<ol type="1">
<li><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qml-package.html">Package</a> Managers: The library is available via:<ul>
<li><b>Arch-Linux:</b> AUR-Repository: <a href="https://aur.archlinux.org/packages/qt5-jsonserializer/"><code>qt5-jsonserializer</code></a></li>
<li><b>Flatpak Module template:</b> <a href="https://github.com/Skycoder42/deployment/blob/master/flatpak/modules/qtjsonserializer/qtjsonserializer.json">Skycoder42/deployment qtjsonserializer.json</a></li>
<li><b>MacOs:</b><ul>
<li>Tap: <a href="https://github.com/Skycoder42/homebrew-qt-modules"><code>brew tap Skycoder42/qt-modules</code></a></li>
<li><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qml-package.html">Package</a>: <code>qtjsonserializer</code></li>
<li><b>IMPORTANT:</b> Due to limitations of homebrew, you must run <code>source /usr/local/opt/qtjsonserializer/bashrc.sh</code> before you can use the module.</li>
</ul>
</li>
</ul>
</li>
<li>Simply add my repository to your <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a> MaintenanceTool (Image-based How-To here: <a href="https://github.com/Skycoder42/QtModules/blob/master/README.md#add-my-repositories-to-qt-maintenancetool">Add custom repository</a>):<ol type="a">
<li>Start the MaintenanceTool from the commandline using <code>/path/to/MaintenanceTool --addRepository &lt;url&gt;</code> with one of the following urls (Alternatively you can add it via the GUI, as stated in the previously linked GUI):<ul>
<li>On Linux: <a href="https://install.skycoder42.de/qtmodules/linux_x64">https://install.skycoder42.de/qtmodules/linux_x64</a></li>
<li>On Windows: <a href="https://install.skycoder42.de/qtmodules/windows_x86">https://install.skycoder42.de/qtmodules/windows_x86</a></li>
<li>On Mac: <a href="https://install.skycoder42.de/qtmodules/mac_x64">https://install.skycoder42.de/qtmodules/mac_x64</a></li>
</ul>
</li>
<li>A new entry appears under all supported <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a> Versions (e.g. <code><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a> &gt; <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a> 5.13 &gt; Skycoder42 <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a> modules</code>)</li>
<li>You can install either all of my modules, or select the one you need: <code><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a> JsonSerializer</code></li>
<li>Continue the setup and thats it! you can now use the module for all of your installed Kits for that <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a></li>
</ol>
</li>
<li>Download the compiled modules from the release page. <b>Note:</b> You will have to add the correct ones yourself and may need to adjust some paths to fit your installation!</li>
<li>Build it yourself! <b>Note:</b> This requires perl to be installed. If you don't have/need cmake, you can ignore the related warnings. To automatically build and install to your <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a> installation, perform the following steps:<ul>
<li>Download the sources. Either use <code>git clone</code> or download from the releases. If you choose the second option, you have to manually create a folder named <code>.git</code> in the projects root directory, otherwise the build will fail.</li>
<li><code>qmake</code></li>
<li><code>make</code> (If you want the tests/examples/etc. run <code>make all</code>)</li>
<li>Optional steps:<ul>
<li><code>make doxygen</code> to generate the documentation</li>
<li><code>make -j1 run-tests</code> to build and run all tests</li>
</ul>
</li>
<li><code>make install</code></li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="qtjsonserializer_readme_label_2"></a>
Building without converter registration</h2>
<p>By default, a bunch of list, map, etc. converters are registered for standard <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a> types via the <code>qtJsonSerializerRegisterTypes</code> method. This however needs many generated functions and will increase the size of the generated binary drasticly. If you don't need those converters, run <code>qmake CONFIG+=no_register_json_converters</code> instead of a parameterless qmake. The mentioned function will then be generated as noop method and no converters are registerd.</p>
<p>Please be aware that in this mode it is not possible to serialize e.g. <code><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qlist.html">QList</a>&lt;int&gt;</code> unless you manually register the corresponding converters via <code><a class="el" href="class_qt_json_serializer_1_1_serializer_base.html#af422e64371d52bb9df09f5150ef83f2c" title="Registers a custom type for list converisons.">QtJsonSerializer::JsonSerializer::registerListConverters</a>&lt;int&gt;();</code>!</p>
<h1><a class="anchor" id="qtjsonserializer_readme_label_3"></a>
Usage</h1>
<p>The serializer is provided as a <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a> module. Thus, all you have to do is install the module, and then, in your project, add <code>QT += jsonserializer</code> to your <code>.pro</code> file! The following chapters show an example and explain a few important details regarding the functionality and limits of the implementation.</p>
<h2><a class="anchor" id="qtjsonserializer_readme_label_4"></a>
Example</h2>
<p>Both serialization and desertialization are rather simple. Create an object, and then use the serializer as follows:</p>
<p>The following is an example for a serializable object. <em>Note:</em> The usage of <code>MEMBER</code> Properties is not required, and simply done to make this example more readable. </p><div class="fragment"><div class="line"><span class="keyword">class </span>TestObject : <span class="keyword">public</span> <a class="codeRef" target="_blank" href="https://doc.qt.io/qt-5/class_q_object.html">QObject</a></div>
<div class="line">{</div>
<div class="line">    Q_OBJECT</div>
<div class="line"> </div>
<div class="line">    <a class="codeRef" target="_blank" href="https://doc.qt.io/qt-5/qobject.html#Q_PROPERTY">Q_PROPERTY</a>(<a class="codeRef" target="_blank" href="https://doc.qt.io/qt-5/qstring.html">QString</a> stringProperty MEMBER stringProperty)</div>
<div class="line">    <a class="codeRef" target="_blank" href="https://doc.qt.io/qt-5/qobject.html#Q_PROPERTY">Q_PROPERTY</a>(<a class="codeRef" target="_blank" href="https://doc.qt.io/qt-5/qlist.html">QList&lt;int&gt;</a> simpleList MEMBER simpleList)</div>
<div class="line">    <a class="codeRef" target="_blank" href="https://doc.qt.io/qt-5/qobject.html#Q_PROPERTY">Q_PROPERTY</a>(<a class="codeRef" target="_blank" href="https://doc.qt.io/qt-5/qmap.html">QMap&lt;QString, double&gt;</a> simpleMap MEMBER simpleMap);  <span class="comment">// add the semicolon or use a typedef to surpress most errors of the clang code model</span></div>
<div class="line">    <a class="codeRef" target="_blank" href="https://doc.qt.io/qt-5/qobject.html#Q_PROPERTY">Q_PROPERTY</a>(TestObject* childObject MEMBER childObject)</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    Q_INVOKABLE TestObject(<a class="codeRef" target="_blank" href="https://doc.qt.io/qt-5/class_q_object.html">QObject</a> *parent = <span class="keyword">nullptr</span>);</div>
<div class="line"> </div>
<div class="line">    <a class="codeRef" target="_blank" href="https://doc.qt.io/qt-5/qstring.html">QString</a> stringProperty;</div>
<div class="line">    <a class="codeRef" target="_blank" href="https://doc.qt.io/qt-5/qlist.html">QList&lt;int&gt;</a> simpleList;</div>
<div class="line">    <a class="codeRef" target="_blank" href="https://doc.qt.io/qt-5/qmap.html">QMap&lt;QString, double&gt;</a> simpleMap;</div>
<div class="line">    TestObject* childObject;</div>
<div class="line">}</div>
</div><!-- fragment --><p>You can serialize (and deserialize) the object with: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> serializer = <span class="keyword">new</span> QJsonSerializer(<span class="keyword">this</span>);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">try</span> {</div>
<div class="line">    <span class="comment">//serialize</span></div>
<div class="line">    <span class="keyword">auto</span> <span class="keywordtype">object</span> = <span class="keyword">new</span> TestObject();</div>
<div class="line">    <span class="keywordtype">object</span>-&gt;stringProperty = <span class="stringliteral">&quot;test&quot;</span>;</div>
<div class="line">    <span class="keywordtype">object</span>-&gt;simpleList = {1, 2, 3};</div>
<div class="line">    <span class="keywordtype">object</span>-&gt;simpleMap = {</div>
<div class="line">        {<span class="stringliteral">&quot;pi&quot;</span>, 3.14},</div>
<div class="line">        {<span class="stringliteral">&quot;e&quot;</span>, 2.71}</div>
<div class="line">    };</div>
<div class="line">    <span class="keywordtype">object</span>-&gt;childObject = <span class="keyword">new</span> TestObject(<span class="keywordtype">object</span>);</div>
<div class="line">    <span class="keyword">auto</span> json = serializer-&gt;serialize(<span class="keywordtype">object</span>);</div>
<div class="line">    qDebug() &lt;&lt; json;</div>
<div class="line">    <span class="keyword">delete</span> object;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//deserialize</span></div>
<div class="line">    <span class="keywordtype">object</span> = serializer-&gt;deserialize&lt;TestObject&gt;(json);<span class="comment">//optional: specify the parent</span></div>
<div class="line">    qDebug() &lt;&lt; <span class="keywordtype">object</span>-&gt;stringProperty</div>
<div class="line">             &lt;&lt; <span class="keywordtype">object</span>-&gt;simpleList</div>
<div class="line">             &lt;&lt; <span class="keywordtype">object</span>-&gt;simpleMap</div>
<div class="line">             &lt;&lt; <span class="keywordtype">object</span>-&gt;childObject;</div>
<div class="line">    <span class="keyword">delete</span> object;</div>
<div class="line">} <span class="keywordflow">catch</span>(QJsonSerializerException &amp;e) {</div>
<div class="line">    qDebug() &lt;&lt; e.what();</div>
<div class="line">}</div>
</div><!-- fragment --><p>For the serialization, the created json would look like this: </p><div class="fragment"><div class="line">{</div>
<div class="line">    &quot;stringProperty&quot;: &quot;test&quot;,</div>
<div class="line">    &quot;simpleList&quot;: [1, 2, 3],</div>
<div class="line">    &quot;simpleMap&quot;: {</div>
<div class="line">        &quot;pi&quot;: 3.14,</div>
<div class="line">        &quot;e&quot;: 2.71</div>
<div class="line">    },</div>
<div class="line">    &quot;childObject&quot;: {</div>
<div class="line">        &quot;stringProperty&quot;: &quot;&quot;,</div>
<div class="line">        &quot;simpleList&quot;: [],</div>
<div class="line">        &quot;simpleMap&quot;: {},</div>
<div class="line">        &quot;childObject&quot;: null</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="qtjsonserializer_readme_label_5"></a>
Important Usage Hints</h2>
<p>In order for the serializer to properly work, there are a few things you have to know and do:</p>
<ol type="1">
<li>Only Q_PROPERTY properties of objects/gadgets will be serialized, and of those only properties that are marked to be stored (see <a href="https://doc.qt.io/qt-5/properties.html#requirements-for-declaring-properties">The Property System</a>, STORED attribute)</li>
<li>For the deserialization of QObjects, they need an invokable constructor, that takes only a parent: <code>Q_INVOKABLE MyClass(QObject*);</code></li>
<li>The following types are explicitly supported:<ul>
<li><code>QObject*</code> and deriving classes</li>
<li>Classes/structs marked with <code>Q_GADGET</code> (as value or plain pointer only!)</li>
<li><code><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qlist.html">QList</a>&lt;T&gt;</code>, <code><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qlinkedlist.html">QLinkedList</a>&lt;T&gt;</code>, <code><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qvector.html">QVector</a>&lt;T&gt;</code>, <code><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qstack.html">QStack</a>&lt;T&gt;</code>, <code><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qqueue.html">QQueue</a>&lt;T&gt;</code>, <code><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qset.html">QSet</a>&lt;T&gt;</code>, with T beeing any type that is serializable as well</li>
<li><code><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qmap.html">QMap</a>&lt;<a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qstring.html">QString</a>, T&gt;</code>, <code><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qhash.html">QHash</a>&lt;<a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qstring.html">QString</a>, T&gt;</code>, <code><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qmultimap.html">QMultiMap</a>&lt;<a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qstring.html">QString</a>, T&gt;</code>, <code><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qmultihash.html">QMultiHash</a>&lt;<a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qstring.html">QString</a>, T&gt;</code>, with T beeing any type that is serializable as well (string as key type is required)</li>
<li>Simple types, that are supported by <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qjsonvalue.html">QJsonValue</a> (See <a href="https://doc.qt.io/qt-5/qjsonvalue.html#fromVariant">QJsonValue::fromVariant</a> and <a href="https://doc.qt.io/qt-5/qjsonvalue.html#toVariant">QJsonValue::toVariant</a>)</li>
<li><code>Q_ENUM</code> and <code>Q_FLAG</code> types, as integer or as string<ul>
<li>The string de/serialization of Q_ENUM and Q_FLAG types only works if used as a Q_PROPERTY. Integer will always work.</li>
</ul>
</li>
<li><code>QJson...</code> types</li>
<li><code><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qpair.html">QPair</a>&lt;T1, T2&gt;</code> and <code>std::pair&lt;T1, T2&gt;</code>, of any types that are serializable as well</li>
<li><code>std::tuple&lt;TArgs...&gt;</code>, of any types that are serializable as well</li>
<li><code>std::optional&lt;T&gt;</code>, of any type that is serializable as well</li>
<li><code>std::variant&lt;TArgs...&gt;</code>, of any types that are serializable as well</li>
<li><code>std::chrono::*</code>, for the basic times (hours, minutes, seconds, milliseconds, microseconds, nanoseconds)</li>
<li>Standard QtCore types (<a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qbytearray.html">QByteArray</a>, <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qurl.html">QUrl</a>, <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qversionnumber.html">QVersionNumber</a>, <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/quuid.html">QUuid</a>, <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qpoint.html">QPoint</a>, <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qsize.html">QSize</a>, <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qline.html">QLine</a>, <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qrect.html">QRect</a>, <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qlocale.html">QLocale</a>, <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qregularexpression.html">QRegularExpression</a>, ...)<ul>
<li><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qbytearray.html">QByteArray</a> is represented by a base64 encoded string</li>
</ul>
</li>
<li>Any type you add yourself by extending the serializer (See QJsonTypeConverter documentation)</li>
</ul>
</li>
<li>While simple types (i.e. <code><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qlist.html">QList</a>&lt;int&gt;</code>) are supported out of the box, for custom types (like <code><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qlist.html">QList</a>&lt;TestObject*&gt;</code>) you will have to register converters. This goes for<ul>
<li>List-, Set- and Map-Types: use <code>SerializerBase::registerBasicConverters&lt;T&gt;()</code></li>
<li>List-Types only: use <code>SerializerBase::registerListConverters&lt;T&gt;()</code></li>
<li>Set-Types only: use <code>SerializerBase::registerSetConverters&lt;T&gt;()</code></li>
<li>Map-Types only: use <code>SerializerBase::registerMapConverters&lt;T&gt;()</code><ul>
<li>Maps and hashes can be registered seperately using a template parameter, if you only need one of those</li>
</ul>
</li>
<li><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qpair.html">QPair</a> and std::pair: use <code>SerializerBase::registerPairConverters&lt;T1, T2&gt;()</code></li>
<li>std::tuple: use <code>SerializerBase::registerTupleConverters&lt;TArgs...&gt;()</code></li>
<li>std::optional: use <code>SerializerBase::registerOptionalConverters&lt;T&gt;()</code></li>
<li>std::variant: use <code>SerializerBase::registerVariantConverters&lt;TArgs...&gt;()</code></li>
<li>QSharedPointer/QPointer: use <code>SerializerBase::registerPointerConverters&lt;T&gt;()</code></li>
</ul>
</li>
<li>Polymorphic QObjects are supported. This is done by the serializer via adding a special @class json property. To make a class polymorphic you can:<ul>
<li>Add <code><a class="el" href="serializerbase_8h.html#ae7850cd06e039d9ba8993dd5bfa2f2b3" title="A macro the mark a class as polymorphic.">Q_JSON_POLYMORPHIC(true)</a></code> (or <code>Q_CLASSINFO("polymorphic", "true")</code>) to its definition</li>
<li>Globally force polyphormism (See QJsonSerializer::polymorphing in the doc)</li>
<li>Set a dynamic property: <code>setProperty("__qt_json_serializer_polymorphic", true);</code></li>
</ul>
</li>
<li>By default, the <code>objectName</code> property of QObjects is not serialized (See <a href="src/qjsonserializer.h#L20">keepObjectName</a>)</li>
<li>By default, the JSON <code>null</code> can only be converted to QObjects. For other types the conversion fails (See <a href="src/qjsonserializer.h#L19">allowDefaultNull</a>)</li>
</ol>
<h2><a class="anchor" id="qtjsonserializer_readme_label_6"></a>
Support for alternative Containers</h2>
<p>While the default <a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qt-sub-qtgui.html">Qt</a> containers, like <code><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qlist.html">QList</a></code>, <code><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qvector.html">QVector</a></code> and <code><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qmap.html">QMap</a></code> are all supported by default, custom containers need to be registered. For this, two steps need to happen:</p>
<ul>
<li>For sequential containers:<ol type="1">
<li>Register the container via <code>Q_DECLARE_SEQUENTIAL_CONTAINER_METATYPE</code></li>
<li>Make it available for a certain type via <code>QtJsonSerializer::SequentialWriter::registerWriter&lt;Container, Type&gt;()</code></li>
</ol>
</li>
<li>For associative containers:<ol type="1">
<li>Register the container via <code>Q_DECLARE_ASSOCIATIVE_CONTAINER_METATYPE</code></li>
<li>Make it available for a certain type via <code>QtJsonSerializer::AssociativeWriter::registerWriter&lt;Container, Key, Value&gt;()</code></li>
</ol>
</li>
</ul>
<h1><a class="anchor" id="qtjsonserializer_readme_label_7"></a>
Documentation</h1>
<p>The documentation is available on <a href="https://skycoder42.github.io/QtJsonSerializer/">github pages</a>. It was created using <a href="http://www.doxygen.org/">doxygen</a>. The HTML-documentation and Qt-Help files are shipped together with the module for both the custom repository and the package on the release page. Please note that doxygen docs do not perfectly integrate with QtCreator/QtAssistant.</p>
<h1><a class="anchor" id="qtjsonserializer_readme_label_8"></a>
Porting</h1>
<p>Most changes to the library have been of additive nature. The following list summarizes the most important changes:</p>
<ul>
<li>Support for CBOR de/serialization</li>
<li>Support for generic sequential and associative containers</li>
<li>Improved type safety via extraxtors</li>
<li>More converters (including bitarrays, smart pointers and enums)</li>
<li>All types have been renamed and moved into the <a class="el" href="namespace_qt_json_serializer.html" title="The QtJsonSerializer namespace holds all classes of the module.">QtJsonSerializer</a> namespace</li>
</ul>
<p>The next sections will talk about specific changes and how to adjust your project. Also, if you have any questions or need help porting your project, I am always happy to help. Just create a new Issue asking for help, and it shall be given.</p>
<h2><a class="anchor" id="qtjsonserializer_readme_label_9"></a>
Rename refactoring</h2>
<p>One big part of the 4.0.0 release was to move all types into a namespace and get rid of the <code>QJson</code> prefix. The following table shows how types have been renamed. If you do not want to change all usages in your code, simply use <code>using</code> declarations for the types, i.e. <code>using QJsonSerializer = <a class="el" href="class_qt_json_serializer_1_1_json_serializer.html" title="A class to serialize and deserialize c++ classes to and from JSON.">QtJsonSerializer::JsonSerializer</a>;</code>.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Old name  </th><th class="markdownTableHeadNone">New name   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">QJsonSerializerException  </td><td class="markdownTableBodyNone"><a class="el" href="class_qt_json_serializer_1_1_exception.html" title="Exception thrown by QJsonSerializer if something goes wrong.">QtJsonSerializer::Exception</a>   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">QJsonDeserializationException  </td><td class="markdownTableBodyNone"><a class="el" href="class_qt_json_serializer_1_1_deserialization_exception.html" title="Exception thrown by the serializers if something goes wrong while deserializing.">QtJsonSerializer::DeserializationException</a>   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">QJsonSerializationException  </td><td class="markdownTableBodyNone"><a class="el" href="class_qt_json_serializer_1_1_serialization_exception.html" title="Exception thrown by the serializers if something goes wrong while serializing.">QtJsonSerializer::SerializationException</a>   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">QJsonSerializer  </td><td class="markdownTableBodyNone"><a class="el" href="class_qt_json_serializer_1_1_json_serializer.html" title="A class to serialize and deserialize c++ classes to and from JSON.">QtJsonSerializer::JsonSerializer</a> (split into that class and the base class <a class="el" href="class_qt_json_serializer_1_1_serializer_base.html" title="A base class for the CBOR/JSON serializers.">QtJsonSerializer::SerializerBase</a>)   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">QJsonTypeConverter  </td><td class="markdownTableBodyNone"><a class="el" href="class_qt_json_serializer_1_1_type_converter.html" title="An interface to create custom serializer type converters.">QtJsonSerializer::TypeConverter</a>   </td></tr>
</table>
<h2><a class="anchor" id="qtjsonserializer_readme_label_10"></a>
Changes in type registrations</h2>
<p>With the new system, <code>typedefs</code> are no longer a problem, as now, an advanced type registration system is used to get types instead of parsing class names. Thus, all related methods have been removed. Furthermore, the old system of converting various datatypes from and to a non-generic <code><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qvariant.html">QVariant</a></code> representation via <code><a class="elRef" target="_blank" href="https://doc.qt.io/qt-5/qmetatype.html">QMetaType</a></code> has been superseeded by the <code>QtJsonSerializer::TypeExtracor</code> system. For most usecases this changes nothing, as the <code>QtJsonSerializer::SerializerBase::register*</code> methods still exist. However, if you made use of the old system in custom converters, you should consider migrating to using either the <code>QtJsonSerializer::MetaWriter</code> mechanism for containers, or the <code>QtJsonSerializer::TypeExtracor</code> for other types. Check the documentation on how to use these classes.</p>
<h3><a class="anchor" id="qtjsonserializer_readme_label_11"></a>
Support for more containers</h3>
<p>One additional advantage of the new system is, that now theoretically any sequential or associative container can be supported by the serializer without the need of a custom converter. Alls that is needed is a simple registration of a custom container class within the <code>QtJsonSerializer::MetaWriter</code> classes as well as the type declaration (See <a href="#support-for-alternative-containers">Support for alternative Containers</a>). The following shows a simple example for <code>std::vector</code></p>
<div class="fragment"><div class="line">Q_DECLARE_SEQUENTIAL_CONTAINER_METATYPE(std::vector)</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line">QtJsonSerializer::SequentialWriter::registerWriter&lt;std::vector, int&gt;();</div>
<div class="line">QtJsonSerializer::SequentialWriter::registerWriter&lt;std::vector, double&gt;();</div>
<div class="line">QtJsonSerializer::SequentialWriter::registerWriter&lt;std::vector, QString&gt;();</div>
<div class="line"><span class="comment">// ...</span></div>
</div><!-- fragment --><h2><a class="anchor" id="qtjsonserializer_readme_label_12"></a>
CBOR support</h2>
<p>The biggest feature however is support for de/serialization of CBOR data. Usage is the same as for JSON, simply use <code><a class="el" href="class_qt_json_serializer_1_1_cbor_serializer.html" title="A class to serialize and deserialize c++ classes to and from CBOR.">QtJsonSerializer::CborSerializer</a></code> instead of the <code><a class="el" href="class_qt_json_serializer_1_1_json_serializer.html" title="A class to serialize and deserialize c++ classes to and from JSON.">QtJsonSerializer::JsonSerializer</a></code> class. Nothing more to say here - simply try it out!</p>
<h2><a class="anchor" id="qtjsonserializer_readme_label_13"></a>
Changes for TypeConverters</h2>
<p>If you previously had your own <code>QJsonTypeConverter</code> (now called <code><a class="el" href="class_qt_json_serializer_1_1_type_converter.html" title="An interface to create custom serializer type converters.">QtJsonSerializer::TypeConverter</a></code>), the changes are slightly more complex. The primary change was, that all these converter now operate on CBOR data, not JSON, as CBOR can be easily converted to JSON, but not the other way around. Check the <a class="el" href="class_qt_json_serializer_1_1_type_converter.html" title="An interface to create custom serializer type converters.">QtJsonSerializer::TypeConverter</a> documentation for more details on how to use these new converters. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<div class="ttc" id="aqobject_html_Q_PROPERTY"><div class="ttname"><a href="https://doc.qt.io/qt-5/qobject.html#Q_PROPERTY">QObject::Q_PROPERTY</a></div><div class="ttdeci">Q_PROPERTY(...)</div></div>
<div class="ttc" id="aqlist_html"><div class="ttname"><a href="https://doc.qt.io/qt-5/qlist.html">QList</a></div></div>
<div class="ttc" id="aqstring_html"><div class="ttname"><a href="https://doc.qt.io/qt-5/qstring.html">QString</a></div></div>
<div class="ttc" id="aqmap_html"><div class="ttname"><a href="https://doc.qt.io/qt-5/qmap.html">QMap</a></div></div>
<div class="ttc" id="aclass_q_object_html"><div class="ttname"><a href="https://doc.qt.io/qt-5/class_q_object.html">QObject</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Dec 3 2019 08:44:13 for QtJsonSerializer by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
